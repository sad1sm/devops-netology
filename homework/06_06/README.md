## Задача 1


- напишите список операций, которые вы будете производить для остановки запроса пользователя
  
Найдем операцию висящую больше чем 3 минуты (180 сек):  
`db.currentOp( { "secs_running" : { $gt : 180 } } )`  
Остановим операцию по opid:  
`db.killOp(opid)`  

- предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB

Сперва проанализируем запросы с помощью explain(), потом, в зависимости от результата, можем перестроить индекс, пересмотреть политику настройки работы с репликами, настроить шардирование, ну или если все не помогает- увеличить производительность серверов.


## Задача 2

Как вы думаете, в чем может быть проблема?

Проблема может быть в большом кол-ве ключей истекающих моментально, в недостаточном кол-ве ОЗУ, в настройке ядра ОС Transparent Huge Pages.

## Задача 3
  
Как вы думаете, почему это начало происходить и как локализовать проблему?
  
Какие пути решения данной проблемы вы можете предложить?
  
Проблемы такого характера могут возникать из-за сетевых проблем.  
Из-за больших запросов, тогда можно попробовать увеличить параметр net_read_timeout (по умолчанию 30 сек).  
Возможно проблема в параметре connect_timeout, ее можно выявить выяснив значение `SHOW GLOBAL STATUS LIKE 'Aborted_connects'`.  
Возможно проблема в BLOB значениях, которые больше параметра max_allowed_packet, такую проблему подтверждает ошибка ER_NET_PACKET_TOO_LARGE.  
  
## Задача 4

Как вы думаете, что происходит?

Как бы вы решили данную проблему?

Причина в нехватке ОЗУ.
Решить проблему можно увеличив кол-во оперативной памяти на сервере или настройкой нескольких параметров в конфигурации используя формулу (shared_buffers + (temp_buffers + work_mem) * max_connections).
